---
title: "Construct a Dense Column"
type: docs
repo: https://github.com/rstudio/tfestimators
menu:
  main:
    name: "Construct a Dense Column - tfestimators"
    parent: tfestimators-reference
---
    
    
    <p>Use this when your inputs are sparse, but you want to convert them to a dense
representation (e.g., to feed to a DNN). Inputs must be a
categorical column created by any of the <code>column_categorical_*()</code>
functions.</p>
    

    <div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>column_embedding</span>(<span class='no'>categorical_column</span>, <span class='no'>dimension</span>, <span class='kw'>combiner</span> <span class='kw'>=</span> <span class='st'>"mean"</span>,
  <span class='kw'>initializer</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ckpt_to_load_from</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>tensor_name_in_ckpt</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>max_norm</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>trainable</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</code></pre></div>
    
    <h2 id="arguments">Arguments</h2>
    <table class="ref-arguments">
    
    <colgroup>
      <col class="name" />
      <col class="desc" />
    </colgroup>  
      
    <tr>
      <td>categorical_column</td>
      <td><p>A categorical column created by a
<code>column_categorical_*()</code> function. This column produces the sparse IDs
that are inputs to the embedding lookup.</p></td>
    </tr>
    <tr>
      <td>dimension</td>
      <td><p>A positive integer, specifying dimension of the embedding.</p></td>
    </tr>
    <tr>
      <td>combiner</td>
      <td><p>A string specifying how to reduce if there are multiple
entries in a single row. Currently <code>"mean"</code>, <code>"sqrtn"</code> and <code>"sum"</code> are
supported, with <code>"mean"</code> the default. <code>"sqrtn"</code>' often achieves good
accuracy, in particular with bag-of-words columns. Each of this can be
thought as example level normalizations on the column.</p></td>
    </tr>
    <tr>
      <td>initializer</td>
      <td><p>A variable initializer function to be used in embedding
variable initialization. If not specified, defaults to
<code>tf$truncated_normal_initializer</code> with mean <code>0.0</code> and standard deviation
<code>1 / sqrt(dimension)</code>.</p></td>
    </tr>
    <tr>
      <td>ckpt_to_load_from</td>
      <td><p>String representing checkpoint name/pattern from
which to restore column weights. Required if <code>tensor_name_in_ckpt</code> is not
<code>NULL</code>.</p></td>
    </tr>
    <tr>
      <td>tensor_name_in_ckpt</td>
      <td><p>Name of the <code>Tensor</code> in <code>ckpt_to_load_from</code> from
which to restore the column weights. Required if <code>ckpt_to_load_from</code> is not
<code>NULL</code>.</p></td>
    </tr>
    <tr>
      <td>max_norm</td>
      <td><p>If not <code>NULL</code>, embedding values are l2-normalized to this
value.</p></td>
    </tr>
    <tr>
      <td>trainable</td>
      <td><p>Whether or not the embedding is trainable. Default is TRUE.</p></td>
    </tr>
    </table>
    
    <h2 id="value">Value</h2>

    <p>A dense column that converts from sparse input.</p>
    
    <h2 id="raises">Raises</h2>

    
    <ul>
<li><p>ValueError: if <code>dimension</code> not &gt; 0.</p></li>
<li><p>ValueError: if exactly one of <code>ckpt_to_load_from</code> and <code>tensor_name_in_ckpt</code>
is specified.</p></li>
<li><p>ValueError: if <code>initializer</code> is specified and is not callable.</p></li>
</ul>
    
    <h2 id="see-also">See also</h2>

    <div class='dont-index'><p>Other feature column constructors: <code><a href='column_bucketized.html'>column_bucketized</a></code>,
  <code><a href='column_categorical_weighted.html'>column_categorical_weighted</a></code>,
  <code><a href='column_categorical_with_hash_bucket.html'>column_categorical_with_hash_bucket</a></code>,
  <code><a href='column_categorical_with_identity.html'>column_categorical_with_identity</a></code>,
  <code><a href='column_categorical_with_vocabulary_file.html'>column_categorical_with_vocabulary_file</a></code>,
  <code><a href='column_categorical_with_vocabulary_list.html'>column_categorical_with_vocabulary_list</a></code>,
  <code><a href='column_crossed.html'>column_crossed</a></code>,
  <code><a href='column_numeric.html'>column_numeric</a></code>, <code><a href='input_layer.html'>input_layer</a></code></p></div>
    



